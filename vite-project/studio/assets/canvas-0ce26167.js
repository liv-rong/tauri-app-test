import{r as ce,bH as Oe,i as be}from"./index-626914f7.js";const ee=e=>{let t;const r=new Set,n=(y,S)=>{const h=typeof y=="function"?y(t):y;if(!Object.is(h,t)){const _=t;t=S??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(m=>m(t,_))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>l,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{r.clear()}},l=t=e(n,i,u);return u},Ae=e=>e?ee(e):ee;var le={exports:{}},fe={},de={exports:{}},_e={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=ce;function Te(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var De=typeof Object.is=="function"?Object.is:Te,Le=b.useState,Re=b.useEffect,xe=b.useLayoutEffect,ze=b.useDebugValue;function Ce(e,t){var r=t(),n=Le({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return xe(function(){i.value=r,i.getSnapshot=t,B(i)&&o({inst:i})},[e,r,t]),Re(function(){return B(i)&&o({inst:i}),e(function(){B(i)&&o({inst:i})})},[e]),ze(r),r}function B(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!De(e,r)}catch{return!0}}function Fe(e,t){return t()}var Ue=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fe:Ce;_e.useSyncExternalStore=b.useSyncExternalStore!==void 0?b.useSyncExternalStore:Ue;de.exports=_e;var Ne=de.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=ce,He=Ne;function Me(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var je=typeof Object.is=="function"?Object.is:Me,ke=He.useSyncExternalStore,Be=H.useRef,$e=H.useEffect,Ke=H.useMemo,Ye=H.useDebugValue;fe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=Be(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Ke(function(){function u(_){if(!l){if(l=!0,y=_,_=n(_),i!==void 0&&a.hasValue){var m=a.value;if(i(m,_))return S=m}return S=_}if(m=S,je(y,_))return m;var d=n(_);return i!==void 0&&i(m,d)?m:(y=_,S=d)}var l=!1,y,S,h=r===void 0?null:r;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,r,n,i]);var s=ke(e,o[0],o[1]);return $e(function(){a.hasValue=!0,a.value=s},[s]),Ye(s),s};le.exports=fe;var Ze=le.exports;const We=Oe(Ze),{useDebugValue:Ve}=be,{useSyncExternalStoreWithSelector:Ge}=We;const qe=e=>e;function Je(e,t=qe,r){const n=Ge(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ve(n),n}const te=e=>{const t=typeof e=="function"?Ae(e):e,r=(n,i)=>Je(t,n,i);return Object.assign(r,t),r},Xe=e=>e?te(e):te;function ye(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var o;const a=u=>u===null?null:JSON.parse(u,t==null?void 0:t.reviver),s=(o=r.getItem(i))!=null?o:null;return s instanceof Promise?s.then(a):a(s)},setItem:(i,o)=>r.setItem(i,JSON.stringify(o,t==null?void 0:t.replacer)),removeItem:i=>r.removeItem(i)}}const T=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return T(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return T(n)(r)}}}},Qe=(e,t)=>(r,n,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:f=>f,version:0,merge:(f,v)=>({...v,...f}),...t},a=!1;const s=new Set,u=new Set;let l;try{l=o.getStorage()}catch{}if(!l)return e((...f)=>{r(...f)},n,i);const y=T(o.serialize),S=()=>{const f=o.partialize({...n()});let v;const c=y({state:f,version:o.version}).then(g=>l.setItem(o.name,g)).catch(g=>{v=g});if(v)throw v;return c},h=i.setState;i.setState=(f,v)=>{h(f,v),S()};const _=e((...f)=>{r(...f),S()},n,i);let m;const d=()=>{var f;if(!l)return;a=!1,s.forEach(c=>c(n()));const v=((f=o.onRehydrateStorage)==null?void 0:f.call(o,n()))||void 0;return T(l.getItem.bind(l))(o.name).then(c=>{if(c)return o.deserialize(c)}).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==o.version){if(o.migrate)return o.migrate(c.state,c.version)}else return c.state}).then(c=>{var g;return m=o.merge(c,(g=n())!=null?g:_),r(m,!0),S()}).then(()=>{v==null||v(m,void 0),a=!0,u.forEach(c=>c(m))}).catch(c=>{v==null||v(void 0,c)})};return i.persist={setOptions:f=>{o={...o,...f},f.getStorage&&(l=f.getStorage())},clearStorage:()=>{l==null||l.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>d(),hasHydrated:()=>a,onHydrate:f=>(s.add(f),()=>{s.delete(f)}),onFinishHydration:f=>(u.add(f),()=>{u.delete(f)})},d(),m||_},et=(e,t)=>(r,n,i)=>{let o={storage:ye(()=>localStorage),partialize:d=>d,version:0,merge:(d,f)=>({...f,...d}),...t},a=!1;const s=new Set,u=new Set;let l=o.storage;if(!l)return e((...d)=>{r(...d)},n,i);const y=()=>{const d=o.partialize({...n()});return l.setItem(o.name,{state:d,version:o.version})},S=i.setState;i.setState=(d,f)=>{S(d,f),y()};const h=e((...d)=>{r(...d),y()},n,i);i.getInitialState=()=>h;let _;const m=()=>{var d,f;if(!l)return;a=!1,s.forEach(c=>{var g;return c((g=n())!=null?g:h)});const v=((f=o.onRehydrateStorage)==null?void 0:f.call(o,(d=n())!=null?d:h))||void 0;return T(l.getItem.bind(l))(o.name).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==o.version){if(o.migrate)return[!0,o.migrate(c.state,c.version)]}else return[!1,c.state];return[!1,void 0]}).then(c=>{var g;const[we,Pe]=c;if(_=o.merge(Pe,(g=n())!=null?g:h),r(_,!0),we)return y()}).then(()=>{v==null||v(_,void 0),_=n(),a=!0,u.forEach(c=>c(_))}).catch(c=>{v==null||v(void 0,c)})};return i.persist={setOptions:d=>{o={...o,...d},d.storage&&(l=d.storage)},clearStorage:()=>{l==null||l.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:d=>(s.add(d),()=>{s.delete(d)}),onFinishHydration:d=>(u.add(d),()=>{u.delete(d)})},o.skipHydration||m(),_||h},tt=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?Qe(e,t):et(e,t),rt=tt;var he=Symbol.for("immer-nothing"),re=Symbol.for("immer-draftable"),E=Symbol.for("immer-state");function I(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var D=Object.getPrototypeOf;function A(e){return!!e&&!!e[E]}function P(e){var t;return e?me(e)||Array.isArray(e)||!!e[re]||!!((t=e.constructor)!=null&&t[re])||x(e)||j(e):!1}var nt=Object.prototype.constructor.toString(),ne=new WeakMap;function me(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=ne.get(r);return n===void 0&&(n=Function.toString.call(r),ne.set(r,n)),n===nt}function F(e,t,r=!0){M(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function M(e){const t=e[E];return t?t.type_:Array.isArray(e)?1:x(e)?2:j(e)?3:0}function Z(e,t){return M(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ve(e,t,r){const n=M(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function it(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function x(e){return e instanceof Map}function j(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function W(e,t){if(x(e))return new Map(e);if(j(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=me(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[E];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(D(e),n)}else{const n=D(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function X(e,t=!1){return k(e)||A(e)||!P(e)||(M(e)>1&&Object.defineProperties(e,{set:z,add:z,clear:z,delete:z}),Object.freeze(e),t&&Object.values(e).forEach(r=>X(r,!0))),e}function ot(){I(2)}var z={value:ot};function k(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var st={};function O(e){const t=st[e];return t||I(0,e),t}var L;function pe(){return L}function at(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ie(e,t){t&&(O("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function V(e){G(e),e.drafts_.forEach(ut),e.drafts_=null}function G(e){e===L&&(L=e.parent_)}function oe(e){return L=at(L,e)}function ut(e){const t=e[E];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function se(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[E].modified_&&(V(t),I(4)),P(e)&&(e=U(t,e),t.parent_||N(t,e)),t.patches_&&O("Patches").generateReplacementPatches_(r[E].base_,e,t.patches_,t.inversePatches_)):e=U(t,r,[]),V(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==he?e:void 0}function U(e,t,r){if(k(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[E];if(!i)return F(t,(o,a)=>ae(e,i,t,o,a,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return N(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,s=!1;i.type_===3&&(a=new Set(o),o.clear(),s=!0),F(a,(u,l)=>ae(e,i,o,u,l,r,s),n),N(e,o,!1),r&&e.patches_&&O("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function ae(e,t,r,n,i,o,a){if(i==null||typeof i!="object"&&!a)return;const s=k(i);if(!(s&&!a)){if(A(i)){const u=o&&t&&t.type_!==3&&!Z(t.assigned_,n)?o.concat(n):void 0,l=U(e,i,u);if(ve(r,n,l),A(l))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(P(i)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&s)return;U(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(x(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&N(e,i)}}}function N(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X(t,r)}function ct(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:pe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=Q;r&&(i=[n],o=R);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var Q={get(e,t){if(t===E)return e;const r=w(e);if(!Z(r,t))return lt(e,r,t);const n=r[t];return e.finalized_||!P(n)?n:n===$(e.base_,t)?(K(e),e.copy_[t]=J(n,e)):n},has(e,t){return t in w(e)},ownKeys(e){return Reflect.ownKeys(w(e))},set(e,t,r){const n=Se(w(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=$(w(e),t),o=i==null?void 0:i[E];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(it(r,i)&&(r!==void 0||Z(e.base_,t)))return!0;K(e),q(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K(e),q(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=w(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){I(11)},getPrototypeOf(e){return D(e.base_)},setPrototypeOf(){I(12)}},R={};F(Q,(e,t)=>{R[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});R.deleteProperty=function(e,t){return R.set.call(this,e,t,void 0)};R.set=function(e,t,r){return Q.set.call(this,e[0],t,r,e[0])};function $(e,t){const r=e[E];return(r?w(r):e)[t]}function lt(e,t,r){var i;const n=Se(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Se(e,t){if(!(t in e))return;let r=D(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=D(r)}}function q(e){e.modified_||(e.modified_=!0,e.parent_&&q(e.parent_))}function K(e){e.copy_||(e.copy_=W(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ft=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(u=o,...l){return a.produce(u,y=>r.call(this,y,...l))}}typeof r!="function"&&I(6),n!==void 0&&typeof n!="function"&&I(7);let i;if(P(t)){const o=oe(this),a=J(t,void 0);let s=!0;try{i=r(a),s=!1}finally{s?V(o):G(o)}return ie(o,n),se(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===he&&(i=void 0),this.autoFreeze_&&X(i,!0),n){const o=[],a=[];O("Patches").generateReplacementPatches_(t,i,o,a),n(o,a)}return i}else I(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,u=>t(u,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){P(e)||I(8),A(e)&&(e=dt(e));const t=oe(this),r=J(e,void 0);return r[E].isManual_=!0,G(t),r}finishDraft(e,t){const r=e&&e[E];(!r||!r.isManual_)&&I(9);const{scope_:n}=r;return ie(n,t),se(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=O("Patches").applyPatches_;return A(e)?n(e,t):this.produce(e,i=>n(i,t))}};function J(e,t){const r=x(e)?O("MapSet").proxyMap_(e,t):j(e)?O("MapSet").proxySet_(e,t):ct(e,t);return(t?t.scope_:pe()).drafts_.push(r),r}function dt(e){return A(e)||I(10,e),Ee(e)}function Ee(e){if(!P(e)||k(e))return e;const t=e[E];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=W(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=W(e,!0);return F(r,(i,o)=>{ve(r,i,Ee(o))},n),t&&(t.finalized_=!1),r}var _t=new ft,C=_t.produce;const yt=e=>(t,r,n)=>(n.setState=(i,o,...a)=>{const s=typeof i=="function"?C(i):i;return t(s,o,...a)},e(n.setState,r,n)),ht=yt,p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));function mt(e,t=0){return(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase()}let Y;const vt=new Uint8Array(16);function pt(){if(!Y){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y=crypto.getRandomValues.bind(crypto)}return Y(vt)}const St=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ue={randomUUID:St};function Et(e,t,r){var i;e=e||{};const n=e.random??((i=e.rng)==null?void 0:i.call(e))??pt();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return mt(n)}function ge(e,t,r){return ue.randomUUID&&!t&&!e?ue.randomUUID():Et(e,t,r)}var Ie=(e=>(e.Edit="edit",e.AddImg="addImg",e.Select="select",e.Shape="shape",e))(Ie||{}),gt=(e=>(e.Top="Top",e.Bottom="Bottom",e.Up="Up",e.Down="Down",e))(gt||{}),It=(e=>(e.H1="h1_custom",e.H2="h2_custom",e.H3="h3_custom",e.H4="h4_custom",e.H5="h5_custom",e.P="p_custom",e))(It||{});const wt={canvasList:[{id:ge(),title:"PPT1"}],currentCanvasId:null,pptName:"默认模版",title:"",outline:"",template:"",operateValue:Ie.Select,addSvg:"",editTextStyle:{},editTextPosition:null},Ot=Xe()(rt(ht((e,t)=>({...wt,addCanvasList:r=>{e(()=>{var n;return{canvasList:r,currentCanvasId:(n=r[0])==null?void 0:n.id}})},setCanvasList:(r,n)=>{const i=(n==null?void 0:n.select)??"last";e(o=>{var l,y,S;const a=new Set,s=[];for(const h of r){const _=h.id||ge();a.has(_)||(a.add(_),s.push({...h,id:_}))}let u=o.currentCanvasId;return s.length===0?u=null:i==="first"?u=((l=s[0])==null?void 0:l.id)??null:i==="last"?u=((y=s[s.length-1])==null?void 0:y.id)??null:i==="keep"&&(u&&s.some(_=>_.id===u)||(u=((S=s[s.length-1])==null?void 0:S.id)??null)),{canvasList:s,currentCanvasId:u}})},getCanvasList:()=>Array.from(t().canvasList),addCanvasByIndex:(r,n)=>e(C(i=>{i.canvasList.splice(r,0,n),i.currentCanvasId=n.id})),deleteCanvasById:r=>e(C(n=>{var a,s;const i=n.canvasList.findIndex(u=>u.id===r);if(i===-1||n.canvasList.length===1)return;const o=i===n.canvasList.length-1;n.currentCanvasId=o?(a=n.canvasList[i-1])==null?void 0:a.id:(s=n.canvasList[i+1])==null?void 0:s.id,n.canvasList.splice(i,1)})),updateCanvasList:r=>e(C(n=>{const i=n.canvasList.findIndex(o=>o.id===r.id);i!==-1&&(n.canvasList[i]=r)})),clearCanvasList:()=>e(()=>({canvasList:[]}))})),{name:"canvasList_store",storage:ye(()=>localStorage),partialize:e=>({canvasList:e.canvasList,currentCanvasId:e.currentCanvasId,title:e.title,outline:e.outline,template:e.template})}));export{It as C,gt as L,Ie as O,Ot as u,ge as v};
